---
hip: 1137
title: Block Node discoverabilty via Network Address Book
author: Joseph Sinclair <@jsync-swirlds>
working-group: Joseph Sinclair <@jsync-swirlds>, Jasper Potts <@jasperpotts>, Richard Bair <@rbair>, Nana Essilfie-Conduah <@Nana-EC>
requested-by: Mirror Node Operators, Relay Node Operators, SDK developers
type: Standards Track
category: Core
needs-hiero-approval: Yes
needs-hedera-review: Yes
hedera-review-date:
hedera-acceptance-decision:
discussions-to: 
status: Draft
created: 2026-02-03
updated: 2026-02-03
---

## Abstract
With the addition of Block Nodes to the Hiero ledger, clients will need a
reliable mechanism to find functioning block nodes. This HIP proposes to add
a new type of service connection and allow consensus node operators to add
additional services to their address book entry.

## Motivation
Block Nodes are a critical component of any Hiero ledger. The Block Nodes
manage and provide access to Block Stream and state snapshot data, as well
as content proof for both blocks and state. Block Nodes may also provide
additional value-add services integral to their core function, and may charge
fees for providing both core and value-add services to clients. A service
is of no value, however, if the service provider cannot be found. Offering a
mechanism to find a Block Node by querying network state ensures a reliable
and trustworthy source of data that is dynamically managed and updated by the
Block Node operators themselves.

## Rationale
Discoverability of services is critical to a broadly useful network and
effective development of network applications. The addition of additional
service connections supports the current addition of block nodes, operated
by the same operators as the current consensus nodes, to the network, and lays
groundwork for adding additional discovery mechanisms in future proposals. While
the proximate motivation for this capability is to enable discoverability of
block nodes operated by consensus node operators, it is also clear that block
nodes are not the only form of new service connections that could, or should, be
published on the blockchain.


## Definitions
<dl>
<dt>Registered Service Connection</dt>
<dd>A service connection managed in conjunction with a consensus node entry
in the network address book that offers services different from the consensus
node API. These additional service connections may be discovered via a node
discovery process.</dd>
<dt>Network Governance</dt>
<dd>Any process, account, set of accounts, smart contract, or other structure
designated by the collective operators and/or owners of a particular Hiero
network to govern the network and ensure that network-wide decisions are proper
and correctly effected. One example is the Hedera governing council.</dd>
</dl>

## User stories
1. As a RPC Relay client, I wish to find an RPC relay using on-chain data.
1. As a Block Node, I need to connect to other block nodes found by inspecting
   block stream data.
1. As a Mirror Node, I want to present block node services to clients using
   on-chain data.
1. As a developer of distributed applications I want to find block nodes,
   mirror nodes, and other network nodes that I can use during operation.
1. As a developer of distributed applications I want to know that the operator
   of each node I use has an on-chain identity.
1. As an Hiero community member, I want to operate a block node or other service
   and publish the service endpoints on-chain so that others can find my
   service.
1. As a block node operator, I want to manage my block node service endpoints on
   an Hiero ledger so that clients can reliably find and connect to my service
   over time.
1. As the operator of a private Hiero ledger, I want to manage the service
   endpoints relevant to my ledger using on-chain data.
1. As an Hiero network governing entity I want the option to identify trusted
   providers of critical network infrastructure services on-chain.
1. As an Hiero network governing entity I want the option to remove obsolete or
   misbehaving service endpoints.
1. As an Hiero network governing entity I want to ensure that creation of
   service endpoints occurs at a reasonable rate and the fees fully compensate
   the network for the long-term cost of maintaining the network address book.
1. As an Hiero consensus node operator I want to identify service endpoints that
   I also operate, and enable my nodes to mutually discover that association.

## Specification
This HIP proposes the introduction of additional fields in NodeService APIs that
enable a consensus node operator to create, delete, and update registered
endpoints associated with their consensus nodes.

### New API Elements

A new Hiero API element will be added, named RegisteredServiceEndpoint.

```protobuf
/**
 * A registered network node endpoint.<br/>
 * Each registered network node in the global address book publishes one or
 * more endpoints which enable the nodes to communicate both with other
 * nodes and with clients to receive requests.
 *
 * This message supports a TCP/UDP port and IP address (V4 or V6),
 * or MAY include a FQDN _instead of_ an IP address.<br/>
 */
message RegisteredServiceEndpoint {
    /**
     * An IP address or fully qualified domain name.
     * <p>
     * This oneof is REQUIRED.
     */
    oneof address {
        /**
         * A 32-bit IPv4 address or 128-bit IPv6 address.<br/>
         * This is the address of the endpoint, encoded in pure "big-endian"
         * (i.e. left to right) order (e.g. IPv4 address `127.0.0.1` has
         * hex bytes in the order `7F`, `00`, `00`, `01`.<br/>
         * IPv6 address `::1` has hex bytes `00`, `00`, `00`, `00`, `00`, `00`,
         * `00`, `00`, `00`, `00`, `00`, `00`, `00`, `00`, `00`, `01`).
         */
        bytes ip_address = 1;

        /**
         * A node domain name.
         * <p>
         * This MUST be the fully qualified domain name of the node.<br/>
         * This value MUST NOT exceed 250 ASCII characters.<br/>
         * This value MUST meet all other DNS name requirements.
         */
        string domain_name = 2;
    }

    /**
     * A network port to use.
     * <p>
     * This value MUST be between 0 and 65535, inclusive.<br/>
     * This value is REQUIRED.
     */
    uint32 port = 3;

    /**
     * A flag indicating if this endpoint requires TLS.
     * <p>
     * If this value is set true, then connections to this endpoint MUST
     * enable TLS.
     * <p>
     * TLS endpoints MAY use self-signed certificates for this purpose,
     * but use of self-signed certificates SHOULD be limited to testing and
     * development environments to ensure production environments meet all
     * expected characteristics for transport layer security.
     */
    bool requires_tls = 4;

    /**
     * An endpoint type.<br/>
     * This declares the type of registered node endpoint and includes any
     * type-specific fields.
     * <p>
     * This oneof is REQUIRED.
     */
    oneof endpoint_type {
        /**
         * A Block Node.<br/>
         * A Block Node stores the block chain, provides content proof services,
         * and delivers the block stream to other clients.
         */
        BlockNodeEndpoint block_node = 5;

        /**
         * A Mirror Node.<br/>
         * A Mirror Node is an advanced indexing and query service that provides
         * fast and flexible access to query the block chain and transaction
         * history. A Mirror Node typically stores all recent blockchain data,
         * and some store the entire history of the network.
         */
        MirrorNodeEndpoint mirror_node = 6;

        /**
         * A RPC Relay.<br/>
         * A RPC Relay is a proxy and translator between EVM tooling and a
         * Hiero consensus network.
         */
        RpcRelayEndpoint rpc_relay = 7;
    }

    /**
     * A message indicating this endpoint is a Block Node endpoint.<br/>
     * Block Node endpoints offer one of several block node APIs, so this
     * endpoint entry also declares which well-known Block Node API is
     * supported by this endpoint, or "OTHER" for less common APIs.
     */
    message BlockNodeEndpoint {
        /**
         * An indicator of what API this endpoint supports.
         * <p>
         * This field is REQUIRED.
         */
        BlockNodeApi endpoint_api = 1;

        /**
         * An enumeration of well-known block node endpoint APIs, and a
         * catch-all option for otherwise unknown endpoint APIs.
         */
        enum BlockNodeApi {
            /**
             * Any other API type associated with a block node.<br/>
             * The caller must consult local documentation to determine the
             * correct call semantics.<br/>
             * It is RECOMMENDED to call the detail status endpoint for further
             * information before using this endpoint.
             */
            OTHER = 0;

            /**
             * The Block Node Status API.
             */
            STATUS = 1;

            /**
             * The Block Node Publish API.
             */
            PUBLISH = 2;

            /**
             * The Block Node Subscribe Stream API.
             */
            SUBSCRIBE_STREAM = 3;

            /**
             * The Block Node State Proof API.
             */
            STATE_PROOF = 4;
        }
    }

    /**
     * A message indicating this endpoint is a Mirror Node endpoint.
     */
    message MirrorNodeEndpoint {
    }

    /**
     * A message indicating this endpoint is a RPC Relay endpoint.
     */
    message RpcRelayEndpoint {
    }
}
```

### Changes to Existing API Elements
Add `additional_service_endpoint` to the existing Consensus Node "Address Book".
```protobuf
message Node {
    // [...]

    /**
     * A list of registered service endpoints operated by the same entity as
     * this node.<br/>
     * <p>
     * This field is OPTIONAL and MAY be empty.<br/>
     * This field MUST NOT contain more than thirty(30) entries.<br/>
     * Every entry in this list MUST be a valid `RegisteredServiceEndpoint` for
     * a current registered node.
     */
    repeated RegisteredServiceEndpoint additional_service_endpoint = 13;
}

message NodeCreateTransactionBody {
    // [...]

    /**
     * A list of registered service endpoints operated by the same entity as
     * this node.<br/>
     * <p>
     * This field is OPTIONAL and MAY be empty.<br/>
     * This field MUST NOT contain more than thirty(30) entries.<br/>
     * Every entry in this list MUST be a valid `RegisteredServiceEndpoint` for
     * a current registered node.
     */
    repeated RegisteredServiceEndpoint additional_service_endpoint = 13;
}

message NodeUpdateTransactionBody {
    // [...]

    /**
     * A list of registered service endpoints operated by the same entity as
     * this node.<br/>
     * <p>
     * This field is OPTIONAL and MAY be empty.<br/>
     * This field MUST NOT contain more than thirty(30) entries.<br/>
     * Every entry in this list MUST be a valid `RegisteredServiceEndpoint` for
     * a current registered node.
     */
    repeated RegisteredServiceEndpoint additional_service_endpoint = 13;
}
```

### Mirror node update
The mirror node will process the new `additional_service_endpoint` field in
Address Book transactions, then return that information through extensions to
its existing APIs.

### SDK Considerations
Each SDK will need to implement the changes to address book transactions.

## Backwards Compatibility
All changes for this HIP are net-new functionality. There is no predicted
impact or change for existing functionality.

## Security Implications
* The addition of additional service endpoints to existing consensus node
  transactions requires transactions to be authorized based on both transaction
  data and existing state data in a much more fine-grained manner than any
  previous transaction. This change will require extensive product security
  review.
* Assigning all types of network services to a single state entity brings all of
  those services into a single closely bound data security realm, this adds
  high sensitivity security constraints to nodes that should not be trusted,
  which may create a high risk disconnect between implied and actual trust.

## Rejected Ideas
1. Use of a separate node registry and transactions was considered and described
   in HIP 1137.
   * This alternative provides a different path for the following reasons.
      1. TBD

## Open Issues
1. We intended to store a uint64 "reputation" value for each registered service
   endpoint, but have not determined an appropriate and workable mechanism for
   allowing network entities to "vote" on that reputation.
   * One concept discussed is to use something similar to a
     "proof of space-time" and a "proof of streaming" for block nodes
     (as one example) as an automated "reputation" modifier. How this would
     be integrated with community sentiment remains an open question.
   * This concept should be the subject of a future HIP.

## Copyright/license
<!-- SPDX-License-Identifier: Apache-2.0 -->
This document is licensed under the Apache License, Version 2.0 --
see [LICENSE](../LICENSE) or (https://www.apache.org/licenses/LICENSE-2.0)
